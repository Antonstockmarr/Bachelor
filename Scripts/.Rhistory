plotNew(log(1.5),9,1)
install.packages("deSolve")
rm(list = ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
par(mar=c(3,3,2,1), mgp=c(2,0.7,0))
library("data.table")
# Loading all data
data.path = "../Watts_DistrictHeatingData_2018/"
file.names <- dir(data.path, pattern =".csv")
n <- length(file.names)
Datalengths = rep(c(1,n),nrow=n)
data <- vector(mode="list", length = n)
# Loading a single table to initialize dates
dt.tmp <- read.table(paste(data.path,file.names[1], sep = ""), sep=";", stringsAsFactors=FALSE, header = TRUE, dec=',')
names(dt.tmp)[1] = 'StartDateTime'
StartDays <- strptime(dt.tmp$StartDateTime[1:n], format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
EndDays <- strptime(dt.tmp$StartDateTime[1:n], format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
for(i in 1:n){
if (i == 5){
dt.tmp <- read.table(paste(data.path,file.names[i], sep = ""), sep="\t", stringsAsFactors=FALSE, header = TRUE, dec=',')
names(dt.tmp)[1] = 'StartDateTime'
dt.tmp$StartDateTime <- strptime(dt.tmp$StartDateTime, format = "%d/%m/%Y %H.%M", tz = "GMT")
dt.tmp$EndDateTime <- strptime(dt.tmp$EndDateTime, format = "%d/%m/%Y %H.%M", tz = "GMT")
}
else
{
dt.tmp <- read.table(paste(data.path,file.names[i], sep = ""), sep=";", stringsAsFactors=FALSE, header = TRUE, dec=',')
dt.tmp$X <- NULL
names(dt.tmp)[1] = 'StartDateTime'
dt.tmp$StartDateTime <- strptime(dt.tmp$StartDateTime, format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
dt.tmp$EndDateTime <- strptime(dt.tmp$EndDateTime, format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
}
Datalengths[i] = length(dt.tmp)
data[[i]] <- dt.tmp
# Setting start and end times for each table.
EndDays[i]= dt.tmp$StartDateTime[1]
StartDays[i]=dt.tmp$StartDateTime[length(dt.tmp$StartDateTime)]
}
# Reading weather data
weather <- read.table('../WeatherData_01-01-2018_09-05-2019.csv', sep="\t", stringsAsFactors=FALSE, header = TRUE, dec=',')
weather$StartDateTime = strptime(weather$StartDateTime,format='%d/%m/%Y %H.%M',tz = 'GMT')
weather$IsHistoricalEstimated=weather$IsHistoricalEstimated=="True"
# Sorting dates
sStartDays <- StartDays[order(StartDays)]
sEndDays <- EndDays[order(EndDays)]
weatherStart = weather$StartDateTime[1]
weatherEnd = weather$StartDateTime[length(weather$StartDateTime[weather$IsHistoricalEstimated==FALSE])]
rm(i,n,file.names,data.path,dt.tmp,Datalengths)
plot(data[[1]]$Flow)
# Investigating each house's flow behaviour
plot(data[[1]]$StartDateTime, data[[1]]$Flow)
# Investigating each house's flow behaviour
plot(data[[1]]$StartDateTime, data[[1]]$Flow, type = "l", xlab="Time", ylab="Flow of house 1")
?plot
?axis
# Investigating each house's flow behaviour
plot.months = c("January", "February", "March", "April", "May", "June", "July", "August",
"September", "November", "December")
plot(data[[1]]$StartDateTime, data[[1]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
axis(1, labels = plot.months, las = 2)
?aggregate
?ggplot
?cut
# Investigating each house's flow behaviour
for (i in 1:1){
data[[i]]$StartDateTime <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
}
# Investigating each house's flow behaviour
for (i in 1:1){
data[[i]]$StartDateTime <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
}
# Investigating each house's flow behaviour
for (i in 1:1){
data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "months"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
}
# Investigating each house's flow behaviour
for (i in 1:1){
data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "months"))
plot(data[[i]]$StartDateTime2, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
}
data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime2, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
# Investigating each house's flow behaviour
for (i in 1:1){
data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime2, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
}
?as.Date
data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
data[[1]]$StartDateTime2
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(month(data[[i]]$StartDateTime), data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
}
plot(data[[1]]$Flow)
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(month(data[[i]]$StartDateTime), data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
}
plot.months <- c("January", "February", "March", "April", "May", "June", "July", "August",
"September", "November", "December")
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(month(data[[i]]$StartDateTime), data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
axis(1, labels = plot.months, las = 2)
}
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(month(data[[i]]$StartDateTime), data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
axis(1, at = month(data[[i]]$StartDateTime), labels = plot.months, las = 2)
}
month(data[[1]]$StartDateTime)
data[[1]]$StartDateTime
rm(list = ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
par(mar=c(3,3,2,1), mgp=c(2,0.7,0))
library("data.table")
# Loading all data
data.path = "../Watts_DistrictHeatingData_2018/"
file.names <- dir(data.path, pattern =".csv")
n <- length(file.names)
Datalengths = rep(c(1,n),nrow=n)
data <- vector(mode="list", length = n)
# Loading a single table to initialize dates
dt.tmp <- read.table(paste(data.path,file.names[1], sep = ""), sep=";", stringsAsFactors=FALSE, header = TRUE, dec=',')
names(dt.tmp)[1] = 'StartDateTime'
StartDays <- strptime(dt.tmp$StartDateTime[1:n], format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
EndDays <- strptime(dt.tmp$StartDateTime[1:n], format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
for(i in 1:n){
if (i == 5){
dt.tmp <- read.table(paste(data.path,file.names[i], sep = ""), sep="\t", stringsAsFactors=FALSE, header = TRUE, dec=',')
}
else
{
dt.tmp <- read.table(paste(data.path,file.names[i], sep = ""), sep=";", stringsAsFactors=FALSE, header = TRUE, dec=',')
dt.tmp$X <- NULL
}
names(dt.tmp)[1] = 'StartDateTime'
dt.tmp$StartDateTime <- strptime(dt.tmp$StartDateTime, format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
dt.tmp$EndDateTime <- strptime(dt.tmp$EndDateTime, format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
Datalengths[i] = length(dt.tmp)
data[[i]] <- dt.tmp
# Setting start and end times for each table.
EndDays[i]= dt.tmp$StartDateTime[1]
StartDays[i]=dt.tmp$StartDateTime[length(dt.tmp$StartDateTime)]
}
# Reading weather data
weather <- read.table('../WeatherData_01-01-2018_09-05-2019.csv', sep="\t", stringsAsFactors=FALSE, header = TRUE, dec=',')
weather$StartDateTime = strptime(weather$StartDateTime,format='%d/%m/%Y %H.%M',tz = 'GMT')
weather$IsHistoricalEstimated=weather$IsHistoricalEstimated=="True"
# Sorting dates
sStartDays <- StartDays[order(StartDays)]
sEndDays <- EndDays[order(EndDays)]
weatherStart = weather$StartDateTime[1]
weatherEnd = weather$StartDateTime[length(weather$StartDateTime[weather$IsHistoricalEstimated==FALSE])]
rm(i,n,file.names,data.path,dt.tmp,Datalengths)
data[[1]]$StartDateTime
month(data[[1]]$StartDateTime)
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(month(data[[i]]$StartDateTime), data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
axis(1, at = month(data[[i]]$StartDateTime), labels = plot.months, las = 2)
}
plot.months <- c("January", "February", "March", "April", "May", "June", "July", "August",
"September", "November", "December")
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(month(data[[i]]$StartDateTime), data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
axis(1, at = month(data[[i]]$StartDateTime), labels = plot.months, las = 2)
}
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(month(data[[i]]$StartDateTime), data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
axis(1, at = month(data[[i]]$StartDateTime), las = 2)
}
plot(month(data[[1]]$StartDateTime), data[[1]]$Flow)
plot(month(data[[1]]$StartDateTime), data[[1]]$Flow, "l")
plot(data[[1]]$StartDateTime, data[[1]]$Flow, "l")
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
axis(1, at = month(data[[i]]$StartDateTime), las = 2)
}
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1", xaxt ='n')
axis(1, at = month(data[[i]]$StartDateTime), las = 2)
}
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1", xaxt ='n')
axis(1, at = month(data[[i]]$StartDateTime), labels = month(data[[i]]$StartDateTime), las = 2)
}
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1", xaxt ='n')
axis(1, at = 1:12, labels = month(data[[i]]$StartDateTime), las = 2)
}
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1", xaxt ='n')
axis(1, at = 1:12, labels = months, las = 2)
}
rm(list = ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
par(mar=c(3,3,2,1), mgp=c(2,0.7,0))
library("LSTS")
library(marima)
library(xtable)
# Read data
D <- read.csv("A3_hcab.csv")
setwd("~/Dropbox/DTU/5. semester/02417 TidsrÃ¦kkeanalyse/Assignments/Assignment 3")
# Read data
D <- read.csv("A3_hcab.csv")
source("step.slow.marima_2017.R")
source("step.slow.p.marima_2017.R")
# Create train and test data
train.NOx <- D$NOx[1:703]
test.NOx <- D$NOx[704:751]
train.NO2 <- D$NO2[1:703]
test.NO2 <- D$NO2[704:751]
train.O3 <- D$O3[1:703]
test.O3 <- D$O3[704:751]
train.Time <- D$Time[1:703]
test.Time <- D$Time[704:751]
train.data <- D[1:703,]
D$newTime <- as.POSIXlt(D$Time)
train.newTime <- D$newTime[1:703]
test.newTime <- D$newTime[704:751]
# Different plots of the three gasses
par(mfrow=c(3,1))
plot(train.newTime, train.NOx, type="l", xlab="Date", ylab="NOx")
lines(test.newTime, test.NOx, col=2)
# Presenting the data
par(mfrow=c(3,1), mar=c(4, 4, 1, 1) + 0.1)
plot(time, NOx, col=1, type = "l", xlab="Time", ylab="NOx concentrations",xaxt='n')
rm(list=ls())
## Setting working directory
setwd("~/Dropbox/DTU/5. semester/02417 Tidsr??kkeanalyse/Assignments/Assignment 3")
## Loading data
wr <- read.csv("A3_hcab.csv", sep = ",", header=TRUE)
## Installing packages
library("forecast")
library("marima")
################################
## Question 3.1
time <- c(0:750)
NO2 <- wr$NO2
NOx <- wr$NOx
O3 <- wr$O3
train <- 1:703
test <- 704:751
plot_times <- c(1,25,49,73,97,121,145,169,193,217,241,265,289,313,
337,361,385,409,433,457,481,505,529,553,577,601,625,649,673,697,721,745)
plot_dates <- c("08-25","08-26","08-27","08-28","08-29","08-30","08-31","09-01","09-02","09-03","09-04","09-05","09-06",
"09-07","09-08","09-09","09-10","09-11","09-12","09-13","09-14","09-15","09-16","09-17","09-18","09-19",
"09-20","09-21","09-22","09-23","09-24","09-25")
# Presenting the data
par(mfrow=c(3,1), mar=c(4, 4, 1, 1) + 0.1)
plot(time, NOx, col=1, type = "l", xlab="Time", ylab="NOx concentrations",xaxt='n')
# Presenting the data
par(mfrow=c(3,1), mar=c(4, 4, 1, 1) + 0.1)
plot(time, NOx, col=1, type = "l", xlab="Time", ylab="NOx concentrations")
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
#axis(1, at = month(data[[i]]$StartDateTime), labels = month(data[[i]]$StartDateTime), las = 2)
}
rm(list = ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
par(mar=c(3,3,2,1), mgp=c(2,0.7,0))
source("data.R")
pairs(data[[1]])
plot(data[[1]]$Flow)
plot.months <- c("January", "February", "March", "April", "May", "June", "July", "August",
"September", "November", "December")
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
#axis(1, at = month(data[[i]]$StartDateTime), labels = month(data[[i]]$StartDateTime), las = 2)
}
?as.POSIXlt
# Investigating each house's flow behaviour
for (i in 1:1){
data[[i]]$StartDateTime.new <- as.POSIXlt(data[[i]]$StartDateTime)
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime.new, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
#axis(1, at = month(data[[i]]$StartDateTime), labels = month(data[[i]]$StartDateTime), las = 2)
}
?month
?months
# Investigating each house's flow behaviour
for (i in 1:1){
data[[i]]$StartDateTime.new <- as.POSIXlt(data[[i]]$StartDateTime)
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(months(data[[i]]$StartDateTime), data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
#axis(1, at = month(data[[i]]$StartDateTime), labels = month(data[[i]]$StartDateTime), las = 2)
}
rm(list = ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
par(mar=c(3,3,2,1), mgp=c(2,0.7,0))
source("data.R")
pairs(data[[1]])
plot(data[[1]]$Flow)
plot.months <- c("January", "February", "March", "April", "May", "June", "July", "August",
"September", "November", "December")
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime.new <- as.POSIXlt(data[[i]]$StartDateTime)
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(months(data[[i]]$StartDateTime), data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
#axis(1, at = month(data[[i]]$StartDateTime), labels = month(data[[i]]$StartDateTime), las = 2)
}
months(data[[1]]$StartDateTime)
plot(months(data[[1]]$StartDateTime), data[[1]]$Flow, "l")
plot(data[[1]]$StartDateTime, data[[1]]$Flow, "l")
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime.new <- as.POSIXlt(data[[i]]$StartDateTime)
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
axis(1, at = months(data[[i]]$StartDateTime), labels = months(data[[i]]$StartDateTime), las = 2)
}
?months
unique(months(data[[i]]$StartDateTime))
?axis
?axis.Date
time <- seq(as.Date(StartDays[1]),as.Date(EndDays[1]), by = "1 mon")
plot(data[[1]]$StartDateTime, data[[1]]$Flow, "l", xaxt = 'n')
axis.Date(1, at = seq(min(time), max(time), by = "1 mon"), format = "%m")
?axis.Date
time
time <- seq(as.Date(StartDays[1]),as.Date(EndDays[1]), by = "1 mon")
plot(data[[1]]$StartDateTime, data[[1]]$Flow, "l", xaxt = 'n')
axis.Date(1, at = seq(min(time), max(time), by = "12 mon"), format = "%m")
rm(list = ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
par(mar=c(3,3,2,1), mgp=c(2,0.7,0))
time <- seq(as.Date(StartDays[1]),as.Date(EndDays[1]), by = "1 mon")
plot(data[[1]]$StartDateTime, data[[1]]$Flow, "l", xaxt = 'n')
source("data.R")
time <- seq(as.Date(StartDays[1]),as.Date(EndDays[1]), by = "1 mon")
plot(data[[1]]$StartDateTime, data[[1]]$Flow, "l", xaxt = 'n')
axis.Date(1, at = seq(min(time), max(time), by = "12 mon"), format = "%m")
par(mfrow = c(1,1))
time <- seq(as.Date(StartDays[1]),as.Date(EndDays[1]), by = "1 mon")
plot(data[[1]]$StartDateTime, data[[1]]$Flow, "l", xaxt = 'n')
axis.Date(1, at = seq(min(time), max(time), by = "12 mon"), format = "%m")
?months
weekdays(data[[1]])
weekdays(data[[1]]$StartDateTime)
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime.new <- as.POSIXlt(data[[i]]$StartDateTime)
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow of house 1")
#axis(1, at = months(data[[i]]$StartDateTime), labels = unique(months(data[[i]]$StartDateTime)), las = 2)
}
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime.new <- as.POSIXlt(data[[i]]$StartDateTime)
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow")
#axis(1, at = months(data[[i]]$StartDateTime), labels = unique(months(data[[i]]$StartDateTime)), las = 2)
}
rm(list = ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
par(mar=c(3,3,2,1), mgp=c(2,0.7,0))
library("data.table")
# Loading all data
data.path = "../Watts_DistrictHeatingData_2018/"
file.names <- dir(data.path, pattern =".csv")
n <- length(file.names)
Datalengths = rep(c(1,n),nrow=n)
data <- vector(mode="list", length = n)
# Loading a single table to initialize dates
dt.tmp <- read.table(paste(data.path,file.names[1], sep = ""), sep=";", stringsAsFactors=FALSE, header = TRUE, dec=',')
names(dt.tmp)[1] = 'StartDateTime'
StartDays <- strptime(dt.tmp$StartDateTime[1:n], format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
EndDays <- strptime(dt.tmp$StartDateTime[1:n], format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
for(i in 1:n){
if (i == 5){
dt.tmp <- read.table(paste(data.path,file.names[i], sep = ""), sep="\t", stringsAsFactors=FALSE, header = TRUE, dec=',')
}
else
{
dt.tmp <- read.table(paste(data.path,file.names[i], sep = ""), sep=";", stringsAsFactors=FALSE, header = TRUE, dec=',')
dt.tmp$X <- NULL
}
names(dt.tmp)[1] = 'StartDateTime'
dt.tmp$StartDateTime <- strptime(dt.tmp$StartDateTime, format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
dt.tmp$EndDateTime <- strptime(dt.tmp$EndDateTime, format = "%d-%m-%Y %H:%M:%S", tz = "GMT")
Datalengths[i] = length(dt.tmp)
data[[i]] <- dt.tmp
# Setting start and end times for each table.
EndDays[i]= dt.tmp$StartDateTime[1]
StartDays[i]=dt.tmp$StartDateTime[length(dt.tmp$StartDateTime)]
}
# Reading weather data
weather <- read.table('../WeatherData_01-01-2018_09-05-2019.csv', sep="\t", stringsAsFactors=FALSE, header = TRUE, dec=',')
weather$StartDateTime = strptime(weather$StartDateTime,format='%d/%m/%Y %H.%M',tz = 'GMT')
weather$IsHistoricalEstimated=weather$IsHistoricalEstimated=="True"
# Sorting dates
sStartDays <- StartDays[order(StartDays)]
sEndDays <- EndDays[order(EndDays)]
weatherStart = weather$StartDateTime[1]
weatherEnd = weather$StartDateTime[length(weather$StartDateTime[weather$IsHistoricalEstimated==FALSE])]
weather <- weather[dim(weather)[1]:1,]
tmp <- weather[(weather$StartDateTime <= EndDays[1]),]
tmp <- tmp[tmp$StartDateTime >= StartDays[1],]
rm(i,n,file.names,data.path,dt.tmp,Datalengths)
rm(list = ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
par(mar=c(3,3,2,1), mgp=c(2,0.7,0))
source("data.R")
pairs(data[[1]])
plot(data[[1]]$Flow)
plot.months <- c("January", "February", "March", "April", "May", "June", "July", "August",
"September", "November", "December")
par(mfrow = c(1,1))
time <- seq(as.Date(StartDays[1]),as.Date(EndDays[1]), by = "1 mon")
plot(data[[1]]$StartDateTime, data[[1]]$Flow, "l", xaxt = 'n')
axis.Date(1, at = seq(min(time), max(time), by = "12 mon"), format = "%m")
# Investigating each house's flow behaviour
for (i in 1:1){
#data[[i]]$StartDateTime.new <- as.POSIXlt(data[[i]]$StartDateTime)
#data[[i]]$StartDateTime <- as.Date(data[[i]]$StartDateTime, "%Y-%m-%d")
#data[[i]]$StartDateTime2 <- as.Date(cut(data[[i]]$StartDateTime, breaks = "month"))
plot(data[[i]]$StartDateTime, data[[i]]$Flow, type = "l", xlab ="Time", ylab = "Flow")
#axis(1, at = months(data[[i]]$StartDateTime), labels = unique(months(data[[i]]$StartDateTime)), las = 2)
}
axis(1, at = months(data[[i]]$StartDateTime), labels = unique(months(data[[i]]$StartDateTime)), las = 2)
axis(1, at = unique(months(data[[i]]$StartDateTime)), las = 2)
axis(1, at = unique(months(data[[i]]$StartDateTime)))
A.zero <- matrix(c(0.18, 0.33, 0, 0.60, 0, 0.73, 0.60, 0, 0.73), nrow = 3, byrow = FALSE)
A.zero
# Calculating the dominant eigenvalue
eig <- eigen(A.zero)
A.zero <- matrix(c(0.18, 0.33, 0, 0.60, 0, 0.73, 0.60, 0, 0.73), nrow = 3, byrow = FALSE)
# Calculating the dominant eigenvalue
eig <- eigen(A.zero)
dom <- which.max(abs(eig$values))
dom
eig
# Computing the matrix of elasticities e_{ij}
elas <- elasticity(A)
# Computing the matrix of elasticities e_{ij}
elas <- elasticity(A)
# Computing the matrix of elasticities e_{ij}
elas <- elasticity(A.zero)
par(mfrow = c(1,1))
plot(data[[1]]$StartDateTime, data[[1]]$Flow, "l", xaxt = 'n')
rm(list = ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
par(mar=c(3,3,2,1), mgp=c(2,0.7,0))
source("data.R")
pairs(data[[1]])
plot(data[[1]]$Flow)
plot.months <- c("January", "February", "March", "April", "May", "June", "July", "August",
"September", "November", "December")
par(mfrow = c(1,1))
time <- seq(as.Date(StartDays[1]),as.Date(EndDays[1]), by = "1 mon")
plot(data[[1]]$StartDateTime, data[[1]]$Flow, "l", xaxt = 'n')
drawTimeAxis(x, tick.tstep="months")
install.packages("hydroTSM")
drawTimeAxis(x, tick.tstep="months")
drawxaxis(data[[1]]$StartDateTime, tick.tstep="months")
?drawtimeaxis
?drawaxis
?ggplot
install.packages("ggplot2")
